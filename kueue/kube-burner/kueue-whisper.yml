global:
  gc: false
  gcMetrics: false
  measurements:
  - name: jobLatency
  - name: podLatency
metricsEndpoints:
  - indexer:
      type: local
      metricsDirectory: whisper-resultsi-{{.UUID}}
  
jobs:
  - name: pre-requisites
    namespace: whisper-scale
    qps: 1
    burst: 1
    jobIterations: 1
    namespacedIterations: false
    jobPause: 1s
    cleanup: true
    skipIndexing: true
    namespaceLabels:
      kueue.openshift.io/managed: true
    objects:
      - objectTemplate: resource-flavor.yml
        replicas: 1
      - objectTemplate: cluster-queue.yml
        replicas: 1
      - objectTemplate: local-queue-medium.yml
        replicas: 1
      - objectTemplate: local-queue-large.yml
        replicas: 1
      - objectTemplate: download-script-configmap.yml
        replicas: 1
      - objectTemplate: github-token-secret.yml
        replicas: 1

  - name: whisper-scale
    namespace: whisper-scale
    jobIterations: 16
    namespacedIterations: false
    cleanup: true
    podWait: true
    preLoadImages: false
    qps: 1
    burst: 1
    objects:
      - objectTemplate: whisper-job-medium.yml
        replicas: 1
        inputVars:
          gpu: true
          kueue: true
      - objectTemplate: whisper-job-large.yml
        replicas: 1
        inputVars:
          gpu: true
          kueue: true

